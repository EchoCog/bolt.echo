name = "bolt-echo"
main = "./functions/[[path]].ts"
compatibility_flags = ["nodejs_compat"]
compatibility_date = "2024-07-01"

workers_dev = true
account_id = "f078e3e41007c3af42364a968f77c91a"

[build]
command = "npm run build"
watch_dir = "build/client"

[site]
bucket = "./build/client"
entry-point = "functions/[[path]].ts"

[build.upload]
format = "service-worker"

[env.production]
name = "bolt-echo"
routes = ["https://echocog.org/*"]

[env.production.vars]
ENVIRONMENT = "production"

[env.staging]
name = "bolt-echo-staging"
routes = ["https://staging.echocog.org/*"]

[env.staging.vars]
ENVIRONMENT = "staging"

[triggers]
crons = ["*/15 * * * *"]  # Run every 15 minutes
